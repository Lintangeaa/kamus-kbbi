
<div class="search-results">
    <div class="row">
        <div class="col-md-8">
            <header>
                <h1 class="mb-4">
                    <% if (query) { %>
                        Hasil Pencarian: "<%= query %>"
                    <% } else { %>
                        Pencarian Kata
                    <% } %>
                </h1>
            </header>

            <!-- Search Form -->
            <form action="/search" method="GET" class="mb-4">
                <div class="input-group">
                    <input type="text" class="form-control" name="q" 
                           placeholder="Masukkan kata yang ingin dicari..." 
                           value="<%= query %>" required>
                    <button class="btn btn-primary" type="submit" aria-label="Cari kata">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </form>

            <% if (typeof message !== 'undefined' && message) { %>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i><%= message %>
                </div>
            <% } %>

            <% if (results && results.length > 0) { %>
                <script type="application/ld+json">
                {
                    "@context": "https://schema.org",
                    "@type": "ItemList",
                    "name": "Hasil Pencarian KBBI",
                    "description": "Daftar kata dan definisi dari Kamus Besar Bahasa Indonesia",
                    "numberOfItems": <%= results.length %>,
                    "itemListElement": [
                        <% results.forEach(function(result, index) { %>
                        {
                            "@type": "ListItem",
                            "position": <%= index + 1 %>,
                            "item": {
                                "@type": "DefinedTerm",
                                "name": "<%= result.word %>",
                                "description": "<%= result.definition %>",
                                "inDefinedTermSet": {
                                    "@type": "DefinedTermSet",
                                    "name": "Kamus Besar Bahasa Indonesia"
                                }
                            }
                        }<%= index < results.length - 1 ? ',' : '' %>
                        <% }); %>
                    ]
                }
                </script>
                <% results.forEach(function(result) { %>
                    <article class="card mb-4" itemscope itemtype="https://schema.org/DefinedTerm">
                        <div class="card-header bg-primary text-white">
                            <h2 class="mb-0">
                                <i class="fas fa-book me-2"></i><span itemprop="name"><%= result.word %></span>
                            </h2>
                        </div>
                        <div class="card-body">
                            <div class="definition mb-3">
                                <h3 class="text-muted h6">Definisi:</h3>
                                <p class="mb-0" itemprop="description"><%= result.definition %></p>
                            </div>
                            
                            <% if (result.examples && result.examples.length > 0) { %>
                                <div class="examples">
                                    <h3 class="text-muted h6">Contoh Penggunaan:</h3>
                                    <ul class="list-unstyled">
                                        <% result.examples.forEach(function(example) { %>
                                            <li class="mb-2">
                                                <i class="fas fa-quote-left text-muted me-2"></i>
                                                <span itemprop="exampleOfWork"><%= example %></span>
                                            </li>
                                        <% }); %>
                                    </ul>
                                </div>
                            <% } %>
                        </div>
                    </article>
                <% }); %>
            <% } else if (query) { %>
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Maaf, kata "<%= query %>" tidak ditemukan dalam kamus.
                </div>
            <% } %>

        </div>
        
        <div class="col-md-4">
            <div class="sidebar">
                <!-- AdSense Sidebar Banner -->
                <div class="card mb-3">
                    <div class="card-body text-center p-2">
                        <% if (adsSidebar) { %>
                            <a href="<%= adsSidebar.linkUrl || '#' %>" target="_blank" rel="noopener" class="d-inline-block w-100">
                                <picture>
                                    <source media="(max-width: 768px)" srcset="<%= adsSidebar.imageUrl %>" type="image/webp">
                                    <img src="<%= adsSidebar.imageUrl %>" alt="sidebar ad" class="img-fluid" width="300" height="250" style="max-width:100%; height:auto; max-height:250px; object-fit:cover;" loading="lazy"/>
                                </picture>
                            </a>
                        <% } else { %>
                            <div class="adsense-sidebar" style="
                                background: linear-gradient(45deg, #f8f9fa, #e9ecef);
                                border: 2px dashed #dee2e6;
                                border-radius: 8px;
                                padding: 30px 15px;
                                color: #6c757d;
                                font-size: 12px;
                                min-height: 250px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                flex-direction: column;
                            ">
                                <i class="fas fa-ad fa-lg mb-2"></i>
                                <div>AdSense Banner</div>
                                <small>300x250 Medium Rectangle</small>
                            </div>
                        <% } %>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-lightbulb me-2"></i>Tips Pencarian</h4>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Gunakan kata dasar untuk hasil yang lebih baik
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Hindari singkatan dan akronim
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                Pastikan ejaan kata sudah benar
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card mt-3">
                    <div class="card-header">
                        <h4><i class="fas fa-fire me-2"></i>Kata Populer</h4>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <a href="/search?q=bahasa" class="btn btn-primary btn-sm" aria-label="Cari kata 'bahasa'">Bahasa</a>
                            <a href="/search?q=belajar" class="btn btn-primary btn-sm" aria-label="Cari kata 'belajar'">Belajar</a>
                            <a href="/search?q=indonesia" class="btn btn-primary btn-sm" aria-label="Cari kata 'indonesia'">Indonesia</a>
                            <a href="/search?q=kamus" class="btn btn-primary btn-sm" aria-label="Cari kata 'kamus'">Kamus</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
